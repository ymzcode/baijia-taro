var store=require("../store"),eventEmitter=require("../eventEmitter"),userData=require("../data/user"),TIMEOUT=2;function isAudioOn(){var e=userData.active(),r=!1;return e.forEach(function(e,t){if(e.audioOn)return r=!0,!1}),r}function isVideoOn(){var e=userData.all(),r=!1;return e.forEach(function(e,t){if(e.videoOn)return r=!0,!1;e.mediaExt&&e.mediaExt.forEach(function(e){if(e.videoOn)return r=!0,!1})}),r}module.exports=function(){var e,r,t=store.get("presenterId"),i=store.get("class.started"),o=store.get("webrtcMixUser.videoOn"),n=store.get("webrtcMixUser.audioOn");console.log("presenterId",t),console.log("class.stared",i),t&&i?(e=isVideoOn(),r=isAudioOn()):e=r=!1,e===o&&r===n||(store.set("webrtcMixUser.audioOn",r),store.set("webrtcMixUser.videoOn",e),eventEmitter.trigger(eventEmitter.WEBRTC_MIX_MEDIA_PUBLISH,{user:store.get("webrtcMixUser"),videoOn:e,audioOn:r}))};