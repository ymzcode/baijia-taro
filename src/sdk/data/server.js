"use strict";var data,store=require("../store"),$=require("../jquery");function addCDN(e,r){var t={},o=[],a=function(e){return e.pull};$.each(e,function(e,r){t[a(r)]=1}),$.each(r,function(e,r){t[a(r)]||o.push(e)}),o.sort(function(e,r){return e-r});for(var i=0,n=o.length;i<n;i++)e.push(r[o[i]])}function addServer(e,r){$.isArray(r)||(r=[r]);var t={},o=function(e){return e.ip+e.port};$.each(e,function(e,r){t[o(r)]=1}),$.each(r,function(r,a){t[o(a)]||e.push(a)})}exports.init=function(){(data={roomServerList:[],chatServerList:[],liveServerList:[],masterProxyServerList:[],roomProxyServerList:[],chatProxyServerList:[],activeMasterServer:{},activeRoomServer:{},activeLiveServer:{}}).masterProxyServerList=store.get("partner.ms.proxy")},exports.getMasterProxyServerList=function(){return[]},exports.getRoomProxyServerList=function(){return[]},exports.setRoomProxyServerList=function(e){data.roomProxyServerList=e},exports.getChatProxyServerList=function(){return[]},exports.setChatProxyServerList=function(e){data.chatProxyServerList=e},exports.getRoomServerList=function(){return data.roomServerList},exports.addRoomServer=function(e){addServer(data.roomServerList,e)},exports.getChatServerList=function(){return data.chatServerList},exports.addChatServer=function(e){addServer(data.chatServerList,e)},exports.getLiveServerList=function(){return data.liveServerList},exports.addLiveServer=function(e){addCDN(data.liveServerList,e)},exports.getActiveMasterServer=function(){return data.activeMasterServer},exports.setActiveMasterServer=function(e){data.activeMasterServer=e},exports.getActiveRoomServer=function(){return data&&data.activeRoomServer},exports.setActiveRoomServer=function(e){data.activeRoomServer=e},exports.getActiveChatServer=function(){return data&&data.activeChatServer},exports.setActiveChatServer=function(e){data.activeChatServer=e};