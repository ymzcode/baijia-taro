var $=require("./jquery");function getCharUTF8Length(r){var t=r.charCodeAt(0);return 0==(-128&t)?1:0==(-2048&t)?2:0==(-65536&t)?3:4}function traverse(r,t){for(var e=0,n=0,u=r.length;n<u&&!1!==t(e+=Math.floor((getCharUTF8Length(r.charAt(n))+1)/2),n+1);n++);}exports.size=function(r){var t=0;return"string"===$.type(r)&&traverse(r,function(r){t=r}),t},exports.cut=function(r,t,e){if("number"!==$.type(t)||exports.size(r)<=t)return r;var n="";return traverse(r,function(e,u){if(e>t)return!1;n=r.substr(0,u)}),e="string"===$.type(e)?e:"...",n+e};